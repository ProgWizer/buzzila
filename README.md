# Buzzila - Платформа для тренировки навыков общения с клиентами

Веб-приложение для обучения персонала работе с недовольными клиентами через симуляцию диалогов с ИИ.

## Что это такое

Платформа позволяет сотрудникам практиковаться в решении конфликтных ситуаций с клиентами. Пользователь играет роль сотрудника (официанта, администратора и т.д.), а ИИ выступает в роли недовольного клиента. После завершения диалога система анализирует разговор и дает рекомендации по улучшению навыков.

## Основные функции

- **Симуляция диалогов** - практика с ИИ в разных сценариях
- **Сценарии** - гостиница, кафе, аэропорт с разными уровнями сложности
- **Анализ диалогов** - автоматическая оценка и рекомендации
- **Система достижений** - мотивация через геймификацию
- **Отслеживание прогресса** - статистика по сценариям
- **Админ-панель** - управление пользователями, сценариями, системными промптами

## Технологии

**Backend:** Flask, PostgreSQL, Redis, JWT аутентификация
**Frontend:** React, Tailwind CSS, Chart.js
**ИИ:** DeepSeek API для генерации ответов
**Развертывание:** Docker, Docker Compose

## Быстрый запуск

### Через Docker (рекомендуется)

1. Клонируйте репозиторий:
```bash
git clone <url-репозитория>
cd buzzila
```

2. Создайте файл `.env` в корне проекта:
```env
# База данных
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_db_password
POSTGRES_DB=your_db_name
POSTGRES_HOST=db
POSTGRES_PORT=5432

# Redis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password

# Flask
SECRET_KEY=your_flask_secret
JWT_SECRET_KEY=your_jwt_secret
DEBUG=False

# DeepSeek API
DEEPSEEK_API_KEY=your-api-key-here
DEEPSEEK_API_URL=https://api.deepseek.com/v1
```

3. Запустите приложение:
```bash
docker-compose up --build
```

Приложение будет доступно:
- Frontend: http://localhost
- Backend API: http://localhost:5000

### Локальная разработка

**Backend:**
```bash
cd backend
python -m venv venv
venv\Scripts\activate  # Windows
pip install -r requirements.txt
python app.py
```

**Frontend:**
```bash
cd frontend
npm install
npm start
```

## Структура проекта

```
buzzila/
├── backend/           # Flask API
│   ├── routes/       # API endpoints
│   ├── models/       # Модели базы данных
│   ├── services/     # Бизнес-логика
│   └── utils/        # Утилиты
├── frontend/         # React приложение
│   ├── src/         # Исходный код
│   └── public/      # Статические файлы
└── docker-compose.yml
```

## API Endpoints

- `POST /api/auth/register` - регистрация
- `POST /api/auth/login` - вход
- `GET /api/chat/scenarios` - список сценариев
- `POST /api/chat/session` - создание диалога
- `POST /api/chat/session/{id}/message` - отправка сообщения
- `GET /api/admin/users` - управление пользователями (admin)
- `GET /api/admin/scenarios` - управление сценариями (admin)

## Настройка

### Переменные окружения

Основные настройки в `backend/.env`:
- Параметры базы данных PostgreSQL
- Настройки Redis
- Ключи API для DeepSeek
- JWT секреты

### База данных

При первом запуске автоматически создаются:
- Таблицы пользователей, сценариев, диалогов
- Роли пользователей (user, admin, manager)
- Базовые сценарии для тренировки

## Разработка

### Добавление новых сценариев

1. Через админ-панель (если есть права)
2. Напрямую в базе данных
3. Через API (если реализовано)

### Изменение системных промптов

Системные промпты для ИИ настраиваются в админ-панели:
- Промпт для начала диалога
- Промпт для продолжения диалога
- Настройки поведения ИИ

## Проблемы и решения

### Частые ошибки

1. **Ошибка подключения к базе данных** - проверьте параметры в `.env`
2. **Ошибка DeepSeek API** - проверьте API ключ и лимиты
3. **Проблемы с Redis** - убедитесь что Redis запущен

### Логи

Логи приложения выводятся в stdout. Для продакшена настройте логирование в файлы.

## Лицензия

Проект для внутреннего использования.

## Поддержка

При возникновении проблем создавайте issue в репозитории или обращайтесь к команде разработки.
